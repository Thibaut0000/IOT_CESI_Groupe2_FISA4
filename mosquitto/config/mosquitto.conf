persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log

# Auth â€” global (applies to all listeners)
per_listener_settings false
allow_anonymous false
password_file /mosquitto/config/passwordfile
acl_file /mosquitto/config/aclfile

# Plain MQTT (local dev / intra-Docker)
listener 1883

# MQTTS (TLS)
listener 8883
certfile /mosquitto/config/certs/server.crt
keyfile /mosquitto/config/certs/server.key
cafile /mosquitto/config/certs/ca.crt
require_certificate false
